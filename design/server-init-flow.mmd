<!--
Copyright (c) 2024 Martin Bechard <martin.bechard@DevConsult.ca>
This software is licensed under the MIT License.
File: /Users/martinbechard/dev/mcp-perplexity/design/server-init-flow.mmd
This was generated by Claude Sonnet 3.5, with the assistance of my human mentor

Flow diagram for server initialization
Flowcharts: Because sometimes words just aren't enough!
-->

sequenceDiagram
    participant Main as stdio-server
    participant Transport as StdioServerTransport
    participant Server as PerplexityServer
    participant Service as PerplexityService
    participant Logger as Logger
    participant Config as Environment

    Main->>Config: Load API Key
    Main->>Logger: Initialize
    Main->>Server: Create(apiKey)
    Server->>Service: Initialize Service
    Service->>Service: Setup Axios Instance
    Server->>Server: Setup MCP Handlers
    Main->>Transport: Create Transport
    Main->>Server: Connect(transport)
    Server->>Main: Ready
    Main->>Logger: Log Server Ready