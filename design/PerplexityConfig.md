<!--
Copyright (c) 2024 Martin Bechard <martin.bechard@DevConsult.ca>
This software is licensed under the MIT License.
File: /Users/martinbechard/dev/mcp-perplexity/design/PerplexityConfig.md
This was generated by Claude Sonnet 3.5, with the assistance of my human mentor

Design document for Perplexity API configuration types
Configuration: Where flexibility meets control!
-->

# Table of Contents
- Type: PerplexityConfig

---
# Type: PerplexityConfig

## Overview
Type definition for the configuration object used when making requests to the Perplexity API.

## Design Requirements
1. MUST be implemented as a type (not interface) as specified in high-level design
   Source: High-level design document
2. MUST include all supported Perplexity API parameters
   Source: Perplexity API documentation
3. MUST use optional parameters for non-required fields
   Source: Perplexity API documentation
4. MUST include proper JSDoc comments for all fields
   Source: TypeScript documentation best practices

## Design Considerations
1. Type Validation Boundaries
   - WHY: Ensure values are within Perplexity API limits
   - HOW: Use Zod schema in validator component
   - EXAMPLE:
     ```typescript
     // In validator:
     temperature: z.number().min(0).max(2).optional()
     ```

2. Default Values
   - WHY: Provide consistent fallbacks when optional values aren't specified
   - HOW: Use API_CONSTANTS for default values
   - EXAMPLE:
     ```typescript
     // Usage in service:
     const config = {
       ...API_CONSTANTS.DEFAULT_CONFIG,
       ...userConfig
     }
     ```

## Attributes
```typescript
/**
 * Configuration type for Perplexity API chat completion requests.
 * Reference: https://docs.perplexity.ai/api-reference/chat-completions
 */
type PerplexityConfig = {
    /** The name of the model to use for completion */
    model: string;

    /** Array of messages in the conversation */
    messages: Message[];

    /** Maximum number of tokens to generate. Uses model context limit if unspecified */
    maxTokens?: number;

    /** Controls randomness in the response (0 to 2) */
    temperature?: number;

    /** Alternative to temperature for nucleus sampling (0 to 1) */
    topP?: number;

    /** List of domains to filter citations by */
    searchDomainFilter?: string[];

    /** Whether to return images in the response */
    returnImages?: boolean;

    /** Whether to return related questions */
    returnRelatedQuestions?: boolean;

    /** Time interval for search results filtering */
    searchRecencyFilter?: 'month' | 'week' | 'day' | 'hour';

    /** Number of tokens for top-k filtering (0 to 2048) */
    topK?: number;

    /** Whether to stream the response */
    stream?: boolean;

    /** Penalize new tokens based on presence (-2.0 to 2.0) */
    presencePenalty?: number;

    /** Penalize new tokens based on frequency (greater than 0) */
    frequencyPenalty?: number;
}
```